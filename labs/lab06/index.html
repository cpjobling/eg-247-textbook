

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lab 6: Audio Signals and Sampling &#8212; EG-247 Signals and Systems</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="canonical" href="https://cpjobling.github.io/eg-247-textbook/labs/lab06/index.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 7: Filters" href="../lab07/index.html" />
    <link rel="prev" title="Lab 5: Fourier Series" href="../lab05/index.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://cpjobling.github.io/eg-247-textbook/labs/lab06/index.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Lab 6: Audio Signals and Sampling" />
<meta property="og:description" content="Lab 6: Audio Signals and Sampling  Preamble  Other formats  This document is available in HTML format for online viewing and as PDF for printing.  Acknowledgeme" />


<meta name="twitter:card" content="summary">


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  
  <h1 class="site-logo" id="site-title">EG-247 Signals and Systems</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction/index.html">
   Introducing Signals and Systems
  </a>
 </li>
</ul>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../elementary_signals/index.html">
   Elementary Signals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../laplace_transform/index.html">
   Laplace Transforms and their Applications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../fourier_series/index.html">
   Fourier Series
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../fourier_transform/index.html">
   Fourier Transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../dt_systems/index.html">
   Sampled Data Systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../dft/index.html">
   Discrete Fourier Transform
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  FAQs
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../FAQS/faq.html">
   Answers to Frequently Asked Questions
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  In Class Worksheets
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../worksheets/index.html">
   Worksheets
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Homework
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../homework/index.html">
   Homework
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lab Exercises
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="reference internal" href="../index.html">
   Laboratory Exercises
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/matlab-tutorial.html">
     MATLAB Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../peer-assessment.html">
     Peer Assessment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab01/index.html">
     Lab 1 - Elemementary Signals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab02/index.html">
     Lab 2 - Laplace and Inverse Laplace Transforms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab03/index.html">
     Lab 3 -  Laplace Transforms and Transfer Functions for Circuit Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab04/index.html">
     Lab 4 - Time Domain Convolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab05/index.html">
     Lab 5 - Fourier Series
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Lab 6 - Audio Signals and Sampling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lab07/index.html">
     Optional Lab 7 - Filters
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Project
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../project/index.html">
   Project
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Answers to Selected problems
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction/answers.html">
   Worksheet 2
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Setting up your own version of this book
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup/index.html">
   Setting up your own version of this book
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by 
 <a href="https://jupyterbook.org">
  Jupyter Book
</a>

</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/labs/lab06/index.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/cpjobling/eg-247-textbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/cpjobling/eg-247-textbook/issues/new?title=Issue%20on%20page%20%2Flabs/lab06/index.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/cpjobling/eg-247-textbook/edit/master/labs/lab06/index.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> On this page
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preamble">
   Preamble
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-formats">
     Other formats
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#acknowledgement">
     Acknowledgement
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aims">
   Aims
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#assessment-criteria">
   Assessment criteria
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#before-you-start">
     Before you start
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparation">
     Preparation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sound-samples-web-link">
     Sound Samples (web link)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lab-exercises">
   Lab Exercises
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lab-exercise-12-playing-with-sound-2-marks">
     Lab Exercise 12: Playing With Sound (2 marks)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-1-read-and-store-an-audio-file-in-matlab">
       Part 1: Read and Store an Audio File in Matlab
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-2-play-the-audio-file">
       Part 2: Play the Audio File
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-3-audio-scaling">
       Part 3: Audio Scaling
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-4-playing-a-sound-backwards">
       Part 4: Playing a Sound Backwards
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lab-exercise-13-aliasing-and-anti-aliasing">
     Lab Exercise 13: Aliasing and anti-aliasing
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-5-aliasing">
       Part 5: Aliasing
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-6-sampling-with-anti-aliasing-filters">
       Part 6: Sampling with anti-aliasing filters
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#miniproject-3-composing-music-in-matlab-1-mark">
   Miniproject 3:  Composing Music in MATLAB (1 mark)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#background">
     Background
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#note-frequency">
       Note Frequency
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#note-durations">
       Note Durations
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-music-in-matlab">
       Creating Music in MATLAB
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-to-hand-in">
   What to hand in
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#claim">
     Claim
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#submission">
     Submission
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deadline">
     Deadline
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="lab-6-audio-signals-and-sampling">
<h1>Lab 6: Audio Signals and Sampling<a class="headerlink" href="#lab-6-audio-signals-and-sampling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preamble">
<h2>Preamble<a class="headerlink" href="#preamble" title="Permalink to this headline">¶</a></h2>
<div class="section" id="other-formats">
<h3>Other formats<a class="headerlink" href="#other-formats" title="Permalink to this headline">¶</a></h3>
<p>This document is available in <a class="reference external" href="https://cpjobling.github.io/eg-247-textbook/labs/lab06/index">HTML</a> format for online viewing and as <a class="reference external" href="https://cpjobling.github.io/eg-247-textbook/labs/lab06/lab06.pdf">PDF</a> for printing.</p>
</div>
<div class="section" id="acknowledgement">
<h3>Acknowledgement<a class="headerlink" href="#acknowledgement" title="Permalink to this headline">¶</a></h3>
<p>This lab has been adapted from <a href="http://class.ece.iastate.edu/mmina/ee186/labs/audio.htm" title="Audio Processing with MatLab An Introduction" target="_blank"><strong>Audio Processing with Matlab: An Introduction</strong></a> by Rachel Hager from the Electrical and Computer Engineering Department at Iowa State University and <a class="reference external" href="https://class.ee.washington.edu/SST_textbook/musiclab.pdf">Elementary Music Synthesis</a> by Professor Virginia Stonick of Oregon State University.</p>
</div>
</div>
<div class="section" id="aims">
<h2>Aims<a class="headerlink" href="#aims" title="Permalink to this headline">¶</a></h2>
<p>This lab is an introduction to signal processing with MATLAB. It will help to familiarize you with some of the main functions to read in and play sound files in MATLAB. It also looks at the ideas of aliasing and anti-aliasing filters that is key to the successful conversion from continuous to discrete time signals and systems. It is therefore an opportunity to try some basic digital signal processing.</p>
<p>We also look at a one application of digital signals processing which is simple sound synthesis.</p>
</div>
<div class="section" id="assessment-criteria">
<h2>Assessment criteria<a class="headerlink" href="#assessment-criteria" title="Permalink to this headline">¶</a></h2>
<p>This will be a self-assessed exercise.</p>
<p>Up to 2 marks each can be claimed for Exercises 12 and 13. There is 1 additional mark for Miniproject 3.</p>
<p>Detailed marking criteria for this and the other labs and the project are given in the linked <a class="reference external" href="https://docs.google.com/spreadsheets/d/1EQzwSfGMdw8oiQds4bUR8sZTCgb2lMvcJHjmea-8hW4/edit?usp=sharing">Assessment Criteria</a> [Google sheet].</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="before-you-start">
<h3>Before you start<a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h3>
<p>If you haven’t already, create a suitable folder structure on your file-store for your labs.</p>
<p>I suggest</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span><span class="p">:</span>\<span class="n">workspace</span>
    <span class="n">signals</span><span class="o">-</span><span class="ow">and</span><span class="o">-</span><span class="n">systems</span><span class="o">-</span><span class="n">lab</span>
	    <span class="n">lab01</span>
		<span class="n">lab02</span>
		<span class="n">lab03</span>
        <span class="n">lab04</span>
        <span class="n">lab05</span>
        <span class="n">lab06</span>
        <span class="p">:</span>
</pre></div>
</div>
<p>Use folder <code class="docutils literal notranslate"><span class="pre">p:\workspace\signals-and-systems-lab\lab06</span></code> for this lab.</p>
</div>
<div class="section" id="preparation">
<h3>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h3>
<p>Download and run the <a href="https://github.com/cpjobling/eg-247-textbook/blob/master/portfolio/lab06/soundex.m" target="_blank">linked script</a> to familiarise yourself with the basic tools that MATLAB provides for manipulating and visualizing audio files. You will need to download a sound file and store it in the same folder then edit the script so that it loads your file. Music might be best for this initial exercise but you can use any audio file.</p>
<p>You will need headphones to hear the sounds without disturbing others in class.</p>
</div>
<div class="section" id="sound-samples-web-link">
<h3><a class="reference external" href="http://www.ee.columbia.edu/~dpwe/sounds/">Sound Samples</a> (web link)<a class="headerlink" href="#sound-samples-web-link" title="Permalink to this headline">¶</a></h3>
<p>The web link above points to a source of sound samples. Choose one of these or find some other files from the internet. I downloaded and used the file <a href="http://www.ee.columbia.edu/~dpwe/sounds/musp/msmv2.wav">Music (Vocals) Example 2</a> from <a href="http://www.ee.columbia.edu/~dpwe/sounds/musp/" target="_blank">this page</a> in my example script.</p>
</div>
</div>
<div class="section" id="lab-exercises">
<h2>Lab Exercises<a class="headerlink" href="#lab-exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lab-exercise-12-playing-with-sound-2-marks">
<h3>Lab Exercise 12: Playing With Sound (2 marks)<a class="headerlink" href="#lab-exercise-12-playing-with-sound-2-marks" title="Permalink to this headline">¶</a></h3>
<p>Before starting this lab, create a new MATLAB Live Script File and save it as <code class="docutils literal notranslate"><span class="pre">ex12.mlx</span></code>.</p>
<p>The Live Script will open with a code cell highlighted.</p>
<p>Copy the first instruction below into the Live Script code cell.</p>
<p>Press the <strong>run section</strong> button to execute the code.</p>
<p>Using section breaks between code cells.</p>
<p>Use <strong>run section</strong> or <strong>run section and advance</strong> buttons to step through the code.</p>
<p>Allow each sound sample played in a section to complete before executing the next section that plays a sound sample.</p>
<p>Use the <strong>text</strong> button to add commentary and your observations to your Live Script.</p>
<p>Use the <strong>text style</strong> features to add a title to your Live Script and section headings as appropriate.</p>
<div class="section" id="part-1-read-and-store-an-audio-file-in-matlab">
<h4>Part 1: Read and Store an Audio File in Matlab<a class="headerlink" href="#part-1-read-and-store-an-audio-file-in-matlab" title="Permalink to this headline">¶</a></h4>
<p>To read and store an audio file, you can use one of two different commands. The following stores the file into variable <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="p">=</span> <span class="n">audioread</span><span class="p">(</span><span class="s">&#39;filename&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Unless the audio file is in the same folder as the script, you will need to include the entire filename including the directory.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">C:\My</span> <span class="pre">Documents\EG-247-Lab\portfolio\lab06\Audio.wav</span></code></p>
<p>The command below stores the audio file into variable <code class="docutils literal notranslate"><span class="pre">x</span></code> and the sampling frequency in variable <code class="docutils literal notranslate"><span class="pre">Fs</span></code>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">Fs</span><span class="p">]</span> <span class="p">=</span> <span class="n">audioread</span><span class="p">(</span><span class="s">&#39;filename&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="part-2-play-the-audio-file">
<h4>Part 2: Play the Audio File<a class="headerlink" href="#part-2-play-the-audio-file" title="Permalink to this headline">¶</a></h4>
<p>To play an audio file in MATLAB you use the <code class="docutils literal notranslate"><span class="pre">sound()</span></code> function. The following function plays the sound. If the <code class="docutils literal notranslate"><span class="pre">Fs</span></code> variable is not defined or included in the command, it will assume the default sample rate of 8192 Hz.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">sound</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Fs</span><span class="p">);</span>
</pre></div>
</div>
<p>In the PC lab, the speakers may have been disabled. But even if they are not, it will probably be best if you use head phones with either a standard 3.5 mm phone socket or USB connection to hear the sounds.</p>
</div>
<div class="section" id="part-3-audio-scaling">
<h4>Part 3: Audio Scaling<a class="headerlink" href="#part-3-audio-scaling" title="Permalink to this headline">¶</a></h4>
<p>To scale an audio file the <code class="docutils literal notranslate"><span class="pre">sound()</span></code> command is used. This allows for the modification of an audio signal’s amplitude or frequency.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">sound</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Fs</span><span class="p">);</span>
</pre></div>
</div>
<p>To increase the volume of the audio track you can multiply the variable it is stored in by a scalar. To slow down or speed up the track played you can adjust the sampling rate. Comment on your observations using different values.</p>
<p>Now experiment with different bit values (8,16,24) in the following command:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">sound</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Fs</span><span class="p">,</span><span class="n">bits</span><span class="p">);</span>
</pre></div>
</div>
<p>Comment on your observations.</p>
</div>
<div class="section" id="part-4-playing-a-sound-backwards">
<h4>Part 4: Playing a Sound Backwards<a class="headerlink" href="#part-4-playing-a-sound-backwards" title="Permalink to this headline">¶</a></h4>
<p>The command to reverse the order of the samples in a matrix is <code class="docutils literal notranslate"><span class="pre">flipud()</span></code>. Experiment with this command.</p>
<p>Record your experiments in this part of the lab by saving your Live Script file. Include your thoughts and observations as text elements.</p>
</div>
</div>
<div class="section" id="lab-exercise-13-aliasing-and-anti-aliasing">
<h3>Lab Exercise 13: Aliasing and anti-aliasing<a class="headerlink" href="#lab-exercise-13-aliasing-and-anti-aliasing" title="Permalink to this headline">¶</a></h3>
<p>Download the example file <span class="xref myst">eg-247-message.wav</span> that was recorded in the lecture using the file <span class="xref myst">sampling_demo.m</span> (If you have access to a microphone you can use <code class="docutils literal notranslate"><span class="pre">sampling_demo</span></code> to record your own sound file.)</p>
<div class="section" id="part-5-aliasing">
<h4>Part 5: Aliasing<a class="headerlink" href="#part-5-aliasing" title="Permalink to this headline">¶</a></h4>
<p>Download the file <span class="xref myst">ex13_1.m</span> and open as a LiveScript. Read the script then run it. Complete the remaining examples of “decimation” (effectively aliasing) and listen carefully to the results. Comment on what you hear.</p>
<p>Examine the frequency sprctrum data produced by the Fast-Fourier Transform (FFT). Discuss the results.</p>
</div>
<div class="section" id="part-6-sampling-with-anti-aliasing-filters">
<h4>Part 6: Sampling with anti-aliasing filters<a class="headerlink" href="#part-6-sampling-with-anti-aliasing-filters" title="Permalink to this headline">¶</a></h4>
<p>Download the file <span class="xref myst">ex13_2.m</span> and open as a LiveScript. Read the script then run it. Complete the remaining examples of “resampling” (effectively sampling with anti-alias pre-filtering) and listen carefully to the results. Comment on what you hear.</p>
<p>Examine the frequency spectrum data produced for the sampled signals with pre-filtering. Discuss the results.</p>
</div>
</div>
</div>
<div class="section" id="miniproject-3-composing-music-in-matlab-1-mark">
<h2>Miniproject 3:  Composing Music in MATLAB (1 mark)<a class="headerlink" href="#miniproject-3-composing-music-in-matlab-1-mark" title="Permalink to this headline">¶</a></h2>
<div class="section" id="background">
<h3>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h3>
<p>In this lab exercise, we explore how to use simple tones to compose a segment of music. By using tones of various frequencies, you will construct the first few bars of Beethoven’s famous piece Symphony No. 5 in C-Minor.</p>
<p><strong>IMPORTANT</strong>: Each musical note can be simply represented by a sinusoid whose frequency depends on the note pitch. Assume a sampling rate of 8KHz and that an eighth note = 0.125s (1000 samples).</p>
<p>Musical notes are arranged in groups of twelve notes called octaves. The notes that we’ll be using for Beethoven’s Fifth are in the octave containing frequencies from 220 Hz to 440 Hz. The twelve notes in each octave are logarithmically spaced in frequency, with each note being of a frequency 2<sup>1/12</sup> times the frequency of the note of lower frequency. Thus, a 1-octave pitch shift corresponds to a doubling of the frequencies of the notes in the original octave. Table 1 shows the ordering of notes in the octave to be used to synthesize the opening of Beethoven’s fifth, as well as the fundamental frequencies for these notes. Note the notes without subscripts, correspond to the white keys on a piano. The notes with subscripts - called respective sharp (♯) and flat (♭) - represent the black keys.</p>
<p><strong>Table 1: Notes in the 220-440 Hz Octave</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Number</p></th>
<th class="head"><p>Note</p></th>
<th class="head"><p>Frequency (Hz)</p></th>
<th class="head"><p>Actual frequency (Hz)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>220</p></td>
<td><p>220</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>A<sup>♯</sup>,B<sup>♭</sup></p></td>
<td><p>220 * 2<sup>1/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>B</p></td>
<td><p>220 * 2<sup>2/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Middle C</p></td>
<td><p>220 * 2<sup>3/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>C<sup>♯</sup>,D<sup>♭</sup></p></td>
<td><p>220 * 2<sup>4/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>D</p></td>
<td><p>220 * 2<sup>5/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>D<sup>♯</sup>,E<sup>♭</sup></p></td>
<td><p>220 * 2<sup>6/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>E</p></td>
<td><p>220 * 2<sup>7/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>F</p></td>
<td><p>220 * 2<sup>8/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>F<sup>♯</sup>,G<sup>♭</sup></p></td>
<td><p>220 * 2<sup>9/12</sup></p></td>
<td><p> </p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>G</p></td>
<td><p>220 * 2<sup>10/12</sup></td><td> </p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>G<sup>♯</sup>,A<sup>♭</sup></p></td>
<td><p>220 * 2<sup>11/12</sup></p></td>
<td><p> </p></td>
</tr>
</tbody>
</table>
<p>You should copy this table into a document and use MATLAB or a calculator to complete the table entries.</p>
<p>A musical score is essentially a plot of frequencies (notes, on the vertical scale for you musician types) versus time (measures, on the horizontal scale). The musical sequence of notes to the piece you will synthesize is given in Figure 1. The following discussion identifies how musical scores can be mapped to tones of specific pitch and duration.</p>
<div class="section" id="note-frequency">
<h4>Note Frequency<a class="headerlink" href="#note-frequency" title="Permalink to this headline">¶</a></h4>
<p>In the simplest case, each note may be represented by a burst of a sinusoid followed by a shorter period of silence (a pause). The pauses allow us to distinguish between separate notes of the same pitch. The horizontal lines in Figure 1 represent the notes E, G, B, D, F from the bottom to the top. The spaces between the lines are used to represent the notes F, A, C, and E, again from the bottom to the top. Note that A-G only yields seven notes; the additional notes are due to changes in pitch called sharps (denoted by the symbol ♯) or flats (denoted by the symbol ♭) that follows a given note. A sharp increases the pitch by 2<sup>1/12</sup> and flat decreases the pitch by 2<sup>1/12</sup>.</p>
<p><img alt="Musical Score for Beethoven's Fifth" src="../../_images/music.png" />
Figure 1: Musical Score for Beethoven’s Fifth</p>
<p>In the musical score in Figure 1, the first three eighth notes are all note G. The first half note is an E♭ due to the inclusion of the three flat symbols at the left of the score, since we are in the key of C-minor. After the half note, the symbol is a rest of length equal to the duration of an eighth note. The next three eighth notes are all F, and the final half note is a D. You can get the fundamental frequencies for these notes from Table 1.</p>
</div>
<div class="section" id="note-durations">
<h4>Note Durations<a class="headerlink" href="#note-durations" title="Permalink to this headline">¶</a></h4>
<p>The duration of each note burst is determined by whether the note is a whole note, half note, quarter note, eight note, etc. Obviously, a quarter note has twice the duration of an eighth note, and so on. So your half notes should be four times the duration of your eighth notes. The short pause you use to follow each note should be of the same duration regardless of the length of the note.</p>
</div>
<div class="section" id="creating-music-in-matlab">
<h4>Creating Music in MATLAB<a class="headerlink" href="#creating-music-in-matlab" title="Permalink to this headline">¶</a></h4>
<p>This section of the lab will teach you how to create music using different tones created in MATLAB.</p>
<p>First we are going to code a sine wave of amplitude A = 1, at an audio frequency of 220 * 7/12  Hz (which corresponds to E<sup>♭</sup>) which plays for an eighth note (0.125 seconds).</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">Fs</span> <span class="p">=</span> <span class="mi">8000</span><span class="p">;</span>
<span class="n">Ts</span> <span class="p">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">Fs</span><span class="p">;</span>
<span class="n">Eflat</span> <span class="p">=</span> <span class="nb">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="o">*</span><span class="mi">220</span> <span class="o">*</span> <span class="mi">2</span>^<span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span> <span class="o">.*</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">Ts</span><span class="p">:</span><span class="mf">0.125</span><span class="p">]);</span>
<span class="n">sound</span><span class="p">(</span><span class="n">Eflat</span><span class="p">);</span>
</pre></div>
</div>
<p>This vector <code class="docutils literal notranslate"><span class="pre">Eflat</span></code> now contains samples of the sine wave from t = 0s to t = 0.125s, in samples that are spaced <code class="docutils literal notranslate"><span class="pre">Ts</span></code> seconds apart. Note that this sampling interval corresponds to a sampling frequency of 8 kHz (1/Ts = fs) and Ts will be 0.125 ms. This is standard for voice grade audio channels.</p>
<p>To create a pause use the zeros function:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">pause</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">length</span><span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="n">Ts</span><span class="p">:</span><span class="n">time</span><span class="p">));</span>
</pre></div>
</div>
<p>For example to create an eighth note pause at the start of the tune:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">pause8th</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">length</span><span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="n">Ts</span><span class="p">:</span><span class="mf">0.125</span><span class="p">));</span>
</pre></div>
</div>
<p>Now to write this pause and first note sound to a sound file we use the following command:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">audiowrite</span><span class="p">(</span><span class="s">&#39;first_note.wav&#39;</span><span class="p">,[</span><span class="n">pause8th</span><span class="p">,</span><span class="n">Eflat</span><span class="p">],</span><span class="n">Fs</span><span class="p">);</span>
</pre></div>
</div>
<p>To play the sound, use the <code class="docutils literal notranslate"><span class="pre">sound()</span></code> function.</p>
<p>Now you can complete the opening phrase of Beethoven’s fifth by adding additional notes and pauses of the correct length.</p>
<p>Save the commands you use to create, play and save your version of Beethoven’s Fifth in a MATLAB mlx-file as <code class="docutils literal notranslate"><span class="pre">beethoven.mlx</span></code> and add this to your copy of this lab script along with the sound file.</p>
</div>
</div>
</div>
<div class="section" id="what-to-hand-in">
<h2>What to hand in<a class="headerlink" href="#what-to-hand-in" title="Permalink to this headline">¶</a></h2>
<div class="section" id="claim">
<h3>Claim<a class="headerlink" href="#claim" title="Permalink to this headline">¶</a></h3>
<p>Up to 2 marks each can be claimed for Exercises 12 and 13. There is 1 additional mark for Miniproject 3.</p>
</div>
<div class="section" id="submission">
<h3>Submission<a class="headerlink" href="#submission" title="Permalink to this headline">¶</a></h3>
<p>You should submit the following to the <strong>Lab 06: Audio signals and sampling</strong> Assignment on Canvas.</p>
<ol class="simple">
<li><p>Complete the labwork self-assessment claim form and declaration.</p></li>
<li><p>As evidence of completion of Lab Exercise 12, you should upload the MATLAB Live Script file <code class="docutils literal notranslate"><span class="pre">ex12.mlx</span></code> plus any audio files downloaded or created.</p></li>
<li><p>As evidence of completion of Lab Exercise 13, you should upload the MATLAB Live Script file <code class="docutils literal notranslate"><span class="pre">ex13_1.mlx</span></code>, <code class="docutils literal notranslate"><span class="pre">ex13_2.mlx</span></code> plus any audio files downloaded or created.</p></li>
<li><p>As evidence of completion of Mini-Project 3, you should upload the MATLAB Live Script file beethoven.mlx plus the audio file created.</p></li>
</ol>
</div>
<div class="section" id="deadline">
<h3>Deadline<a class="headerlink" href="#deadline" title="Permalink to this headline">¶</a></h3>
<p>The deadline for claims and submission is <strong>4:00 pm, 3rd April</strong></p>
</div>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../lab05/index.html" title="previous page">Lab 5: Fourier Series</a>
    <a class='right-next' id="next-link" href="../lab07/index.html" title="next page">Lab 7: Filters</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Dr Chris P. Jobling<br/>
        
            &copy; Copyright Swansea University (2019-2020).<br/>
          <div class="extra_footer">
            This page was created by 
<a href="https://www.swansea.ac.uk/staff/engineering/c.p.jobling/">
  Dr Chris P. Jobling
</a> 
for 
<a href="https://www.swansea.ac.uk">
  Swansea University
</a>.

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>